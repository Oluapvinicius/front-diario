<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Diário de Viagens</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="auth-container">
        <div class="auth-card cadastro">
            <div class="logo">
                <i class="fa-solid fa-map-location-dot"></i>
                Diário de Viagens
            </div>
            
            <h2>Crie sua conta</h2>

            <form id="cadastroForm" onsubmit="realizarCadastro(event)">
                
                <div class="form-group">
                    <label for="nome" class="form-label">Nome Completo</label>
                    <input type="text" id="nome" class="form-input" required autocomplete="name">
                </div>

                <div class="form-group">
                    <label for="user_nome" class="form-label">Nome de Usuário</label>
                    <input type="text" id="user_nome" class="form-input" placeholder="Ex: Roberto123" required autocomplete="nickname">
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">E-mail</label>
                    <input type="email" id="email" class="form-input" placeholder="seu@email.com" required autocomplete="email">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="data_nascimento" class="form-label">Data de Nasc.</label>
                        <input type="date" id="data_nascimento" class="form-input" required autocomplete="bday">
                    </div>

                    <div class="form-group">
                        <label for="genero" class="form-label">Gênero</label>
                        <select id="genero" class="form-input" required>
                            <option value="">Selecione</option>
                            <option value="1">Feminino</option>
                            <option value="2">Masculino</option>
                            <option value="3">Outro</option>
                            <option value="4">Prefiro não dizer</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="senha_cadastro" class="form-label">Crie uma Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="senha_cadastro" class="form-input" placeholder="Mínimo 8 caracteres" required minlength="8" autocomplete="new-password">
                        <i class="fa-regular fa-eye password-toggle" onclick="toggleSenha('senha_cadastro', this)"></i>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="confirmar_senha" class="form-label">Confirme a Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="confirmar_senha" class="form-input" required minlength="8" autocomplete="new-password">
                        <i class="fa-regular fa-eye password-toggle" onclick="toggleSenha('confirmar_senha', this)"></i>
                    </div>
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fa-solid fa-user-plus"></i> Finalizar Cadastro
                </button>
            </form>

            <div class="auth-links" style="text-align: center;">
                <p>Já tem uma conta? <a href="index.html">Faça login</a></p>
            </div>
        </div>
    </div>

    <script>
        function toggleSenha(idCampo, icone) {
            const campo = document.getElementById(idCampo);
            if (campo.type === "password") {
                campo.type = "text";
            
                icone.classList.remove('fa-eye-slash');
                icone.classList.add('fa-eye');
            } else {
                campo.type = "password";
              
                icone.classList.remove('fa-eye');
                icone.classList.add('fa-eye-slash');
            }
        }

        function realizarCadastro(event) {
            event.preventDefault();

            const senha = document.getElementById('senha_cadastro').value;
            const confirmar_senha = document.getElementById('confirmar_senha').value;
            const email = document.getElementById('email').value;
            const nomeUsuario = document.getElementById('user_nome').value;

            if (senha !== confirmar_senha) {
                console.error("Erro: As senhas digitadas não coincidem.");
              
                const errorMessage = document.createElement('div');
                errorMessage.textContent = "As senhas digitadas não coincidem. Por favor, verifique.";
                errorMessage.style.cssText = "padding: 10px; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 5px; margin-top: 10px; text-align: center;";
                document.getElementById('cadastroForm').prepend(errorMessage);
                setTimeout(() => errorMessage.remove(), 5000);
                document.getElementById('senha_cadastro').focus();
                return;
            }

            console.log("Tentativa de cadastro bem-sucedida:", { email, nomeUsuario });
            
            
            const successMessage = document.createElement('div');
            successMessage.textContent = "Cadastro realizado com sucesso! Faça login para continuar.";
            successMessage.style.cssText = "padding: 10px; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; border-radius: 5px; margin-top: 10px; text-align: center;";
            document.getElementById('cadastroForm').prepend(successMessage);
            setTimeout(() => {
                successMessage.remove();
                window.location.href = "login.html";
            }, 2000);
        }
    </script>
</body>
</html>